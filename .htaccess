Options -Indexes

<Files ~ "^\.">
	Order allow,deny
	Deny from all
</Files>

<IfModule mod_rewrite.c>
	RewriteEngine On

	RewriteCond %{REQUEST_FILENAME} -f
	RewriteRule . - [S=2]
	RewriteRule ^(.*(\/))?\$.*$ file.php [L,QSA]
	RewriteRule ^.*$ index.php [L,QSA]
</IfModule>

<IfModule mod_deflate.c>  
	# Thanks to http://www.webhostingtalk.com/showpost.php?s=8a447eb3ae62ae0623e8369a9909572e&p=6187878&postcount=3
	#SetEnv no-gzip dont-vary
	# General Configuration settings: use ratio method and highest compression
	#DeflateFilterNote ratio
	#DeflateCompressionLevel 9
	SetOutputFilter DEFLATE

	# Approach 1: Implicit ("Set") compression
	## There are potential issues with compressing everything
	## It will for example send xml compressed to web services or flash
	#SetOutputFilter DEFLATE
	#SetEnvIfNoCase Request_URI \.(?:gif|jpe?g|png)$ no-gzip dont-vary
	#SetEnvIfNoCase Request_URI \.(?:exe|t?gz|zip|bz2|sit|rar)$ no-gzip dont-vary
	#SetEnvIfNoCase Request_URI \.pdf$ no-gzip dont-vary
	#SetEnvIfNoCase Request_URI \.avi$ no-gzip dont-vary
	#SetEnvIfNoCase Request_URI \.mov$ no-gzip dont-vary
	#SetEnvIfNoCase Request_URI \.mp3$ no-gzip dont-vary
	#SetEnvIfNoCase Request_URI \.mp4$ no-gzip dont-vary
	#SetEnvIfNoCase Request_URI \.rm$ no-gzip dont-vary

	# Approach 2: Explicit ("Add") compression by mime-type

	AddOutputFilterByType DEFLATE application/x-httpd-php
	AddOutputFilterByType DEFLATE application/x-httpd-fastphp
	AddOutputFilterByType DEFLATE application/x-httpd-eruby
	AddOutputFilterByType DEFLATE text/html
	AddOutputFilterByType DEFLATE text/plain
	AddOutputFilterByType DEFLATE text/xml
	AddOutputFilterByType DEFLATE application/xhtml+xml
	AddOutputFilterByType DEFLATE text/css
	AddOutputFilterByType DEFLATE application/xml
	AddOutputFilterByType DEFLATE image/svg+xml
	AddOutputFilterByType DEFLATE application/rss+xml
	AddOutputFilterByType DEFLATE application/atom_xml
	AddOutputFilterByType DEFLATE application/x-javascript

	# Implicit compression on the way in
	SetInputFilter DEFLATE

	# Explicit compression on the way in, there is no AddInputFilterByType
	# AddInputFilter DEFLATE html

	SetEnvIfNoCase Request_URI \.(?:gif|jpe?g|png|rar|zip|pdf|doc|swf|flv|mov|wma|mp3|mp4|avi|mp?g)$ no-gzip dont-vary
</IfModule>

<IfModule mod_gzip.c>
	mod_gzip_on Yes
	mod_gzip_dechunk Yes
	mod_gzip_item_include file \.(html?|txt|css|js|php|pl)$
	mod_gzip_item_include handler ^cgi-script$
	mod_gzip_item_include mime ^text/.*
	mod_gzip_item_include mime ^application/x-javascript.*
	mod_gzip_item_exclude mime ^image/.*
	mod_gzip_item_exclude rspheader ^Content-Encoding:.*gzip.*
</IfModule>
